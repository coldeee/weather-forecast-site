# Сервис для получения данных о погоде для городов

## Описание проекта

Этот веб-сервис позволяет пользователям получать прогноз погоды для заданного маршрута, определяя начальную, конечную и промежуточные точки. Сервис использует **AccuWeather API** для получения актуальных данных о погоде и оценивает погодные условия на основе заданных критериев. Результаты представлены в виде интерактивных графиков и карты маршрута.

## Основные возможности

- Ввод начальной, конечной и промежуточных точек маршрута (названия городов)
- Выбор периода прогноза (1, 3 или 5 дней)
- Получение прогноза погоды для всех точек маршрута
- Визуализация данных с помощью интерактивных графиков
- Отображение маршрута и погодных данных на карте
- Оценка погодных условий и вывод предупреждений
- Обработка ошибок и вывод понятных сообщений пользователю

## Структура проекта

```
├── app.py
├── requirements.txt
├── settings.json
├── weather_data.json
├── utils
│   ├── get_info.py
│   ├── weather_checker.py
│   ├── file_reader.py
│   ├── map_handler.py
│   └── visualize.py
│
├── templates
│   ├── index.html
│   ├── result.html
│   ├── dash.html
│   └── not_valid.html
│
└── static
    ├── css
    │   ├── main.css
    │   └── styles.css
    └── js
        ├── background.js
        └── jquery.js

```


### Описание файлов и директорий

   - **app.py**: Основной файл приложения Flask, отвечающий за маршрутизацию и обработку запросов.
   - **settings.json**: Файл конфигурации, содержащий API-ключ для доступа к AccuWeather API.
   - **requirements.txt**: Список Python-библиотек, необходимых для запуска проекта.
   - **weather_data.json**: Файл для хранения полученных данных о погоде (обновляется при каждом запросе).
   - **utils/**: Папка с вспомогательными модулями.
   - `get_info.py`: Модуль для получения информации о локациях и погоде.
   - `weather_checker.py`: Модуль для оценки погодных условий.
   - `file_reader.py`: Модуль для сохранения данных о погоде в JSON-файл.
   - `map_handler.py`: Модуль для создания карты маршрута.
   - `visualize.py`: Модуль для создания графиков и интерактивного графика.
   - **templates/**: Папка с HTML-шаблонами.
   - `index.html`: Главная страница с формой ввода маршрута.
   - `result.html`: Страница с результатами оценки погоды.
   - `dash.html`: Страница с интерактивным графиком.
   - `not_valid.html`: Страница с сообщением об ошибке.
   - **static/**: Папка со статическими файлами.
   - `css/main.css`: Стили для оформления веб-интерфейса.
   - `css/styles.css`: Стили для оформления веб-интерфейса.
   - `js/background.js`: Скрипты для анимации фона.
   - `js/jquery.js`: Скрипты для поддержки промежуточных точек маршрута.

## Установка и запуск

### Предварительные требования

- **Python 3.11+**
- **pip** (менеджер пакетов Python)

### Шаги установки

1. **Клонируйте репозиторий**

2. **Создайте виртуальное окружение (опционально):**

    ```bash
    python -m venv venv
    source venv/bin/activate  # Для Linux/Mac
    ./venv/Scripts/activate    # Для Windows
    ```

3. **Установите необходимые зависимости:**

    ```bash
    pip install -r requirements.txt
    ```

4. **Настройте API-ключ:**

    - Получите API-ключ на [AccuWeather API](https://developer.accuweather.com/).
    - Откройте файл `settings.json` и вставьте ваш ключ:

      ```json
      {
          "API_KEY": "Ваш_API_KEY",
          "CHECK_API_KEY": true
      }
      ```

5. **Запустите приложение:**

    ```bash
    python app.py
    ```

6. **Откройте браузер и перейдите по адресу:**

    ```
    http://127.0.0.1:5000/
    ```

## Использование

1. **Ввод маршрута:**
   - На главной странице введите начальную и конечную точки маршрута (названия городов).

   *Название городов не должно содержать цифр и специальных символов*   
   
2. **Получение результата:**
   - Нажмите кнопку "Получить Погоду".
   - На следующей странице отобразятся:
     - Оценка погодных условий.
     - Детальная информация о погоде в начальной и конечной точках маршрута.

    *Погода считается неблагоприятной, если температура ниже -10 или выше 35 градусов, и/или скорость ветра выше 35 км/ч, и/или вероятность дождя больше 85%*

3. **Обработка ошибок:**
   - В случае некорректного ввода или проблем с API, пользователю будут отображены соответствующие сообщения об ошибках.

## Обработка ошибок

1. **Неправильный формат ввода названия городов**
   - Проверка на наличие только букв и пробелов
   - Поддержка русского и английского алфавитов
   - Вывод конкретного сообщения об ошибке с указанием некорректного города

2. **Ошибка при получении данных от API**
   - Проверка валидности API ключа при запуске
   - Обработка ошибок сетевого соединения
   - Обработка превышения лимита запросов
   - Логирование ошибок в консоль
     
   *проверка api на валидность является опциональной, настраивается в файле settings.json*
3. **Ошибка при попытке найти город**
   - Если возникает ошибка при попытке найти город, приложение выведет сообщение о том, что город не найден.

4. **Крайние случаи с погодными условиями**
   - Все крайние случаи с погодными условиями обрабатываются корректно, никаких ошибок не возникает, характеристика погодных условий выводится корректно.

5. **Остальные случаи**
   - Во всех остальных случаях выводится конкретное сообщение с ошибкой в консоль, для пользователя выводится типизированное сообщение об ошибке, приложение **продолжает работать**.

## Лицензия

Этот проект лицензирован под лицензией MIT. Подробнее см. файл [LICENSE](LICENSE).

## Контакты

Если у вас есть вопросы или предложения, свяжитесь с [rykovanov.b@gmail.com](rykovanov.b@gmail.com).
